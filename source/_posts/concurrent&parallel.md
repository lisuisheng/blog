---
title: 一文理解进程与线程的常见概念
categories:
  - 技术
img: /img/concurrent&parallel.jpg
abbrlink: 54381
date: 2019-03-15 10:17:11
---
### 一文理解进程与线程的常见概念

首先，进程和线程都是针对CPU工作时间段的描述。下面来看一下它们之间的区别。

#### 进程
进程是一个程序运行的时候被CPU抽象出来的概念，一个程序运行后被抽象为一个进程。当计算机执行一个程序的时候，必然会产生一个进程。也就是说，一个程序的执行**至少有一个进程**。


#### 线程
一个进程至少拥有一个线程。线程的划分尺度小于进程，使得多线程程序具有更高的并发性。在一个进程中，可能被划分为多个线程，它可以与同进程中的其他线程共享数据。在进程中，有些程序流程块是可以乱序执行的，并且这个代码块可以同时被多次执行。实际上，这样的代码块就是线程体。线程是进程中乱序执行的代码流程。

>通过栗子了解进程和线程的特点：
> 进程 -> 火车 
> 线程 -> 车厢
>1. 一列火车可能有多个车厢（一个进程可以有多个线程）
>2. 乘客不能在行驶中从一列火车跳到另一列上（进程间数据不共享）
>3. 乘客可以在一列火车上去往各个车厢（同一进程下的线程数据共享）
>4. 一列火车抛锚了不影响另外一列火车，但是一节车厢断掉了会影响一整列火车（进程间不会相互影响，但一个线程挂掉会导致整个进程奔溃）

#### 并行与并发
在同一个时间里，同一个计算机系统中如果允许两个或两个以上的进程处于运行状态，这便是多任务。目前的大多数计算机的操作系统都是多任务系统，能够管理多个进程的运行。这些任务之间互相不受影响，例如我们可以一边上网，一边打印文档。

当然，说到这里，还应谈及到并行与并发。对于计算机来说，一个单核的CPU原则上只能同时执行一个任务（进程）。假设CPU上有多个核的话，就可以同时执行多个任务。例如，4核的CPU可以同时执行4个任务（进程）。一个核执行一个任务，4个任务同时执行这个时候就叫做并行处理。

但是在实际上，我们计算机的CPU性能是非常的强大，强大到其他硬件的运行速度都只能望其项背。在执行任务当中，CPU处理任务的时间是非常短的。假设出现一个CPU处理一个任务的时候，此时CPU大多数的时间都处于空闲状态（实际上是在等待其他硬件执行操作），从而造成性能资源大大的浪费。

因此，并发处理成为了充分利用CPU资源的手段。当多个线程同时运行的时候，这样的执行模式称为并发处理。简单并发处理的算法如“时间片轮转进程调度算法”，它的思想简单介绍如下：在操作系统的管理下，所有正在运行的进程轮流使用CPU，每个进程允许占用CPU的时间非常短(比如10毫秒)，这样用户根本感觉不出来CPU是在轮流为多个进程服务，就好象所有的进程都在不间断地运行一样。但实际上在任何一个时间内有且仅有一个进程占有CPU。

简单的总结一下，如果进程数小于CPU数，则不同的进程可以分配给不同的CPU来运行，这样，多个进程就是真正同时运行的，这便是并行。但如果进程数大于CPU数，则仍然需要使用并发技术。
![images](/blog/img/concurrent&parallel.jpg)

*附图来源于知乎，侵删。*